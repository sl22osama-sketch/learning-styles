<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªØ¨ÙŠØ§Ù† ØªØ­Ø¯ÙŠØ¯ Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… - ØªØ­Ù„ÙŠÙ„ Ø´Ø®ØµÙŠ Ù…ØªÙ‚Ø¯Ù…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        body { 
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #000000 !important;
            font-weight: 800 !important;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        /* ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³ÙˆØ¯ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        *, *::before, *::after {
            color: #000000 !important;
            font-weight: 800 !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        /* Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø£Ù„ÙˆØ§Ù† Ø®Ø§ØµØ© */
        .btn-gradient, .btn-gradient *, 
        .progress-bar, .progress-bar *,
        .option-card.selected, .option-card.selected *,
        .teacher-panel, .teacher-panel *,
        #teacher-dashboard, #teacher-dashboard *,
        .bg-green-500, .bg-red-500, .bg-blue-500, .bg-purple-500, .bg-orange-500,
        .text-white, .text-green-400, .text-purple-400, .text-orange-400, .text-blue-400,
        .text-red-400, .text-yellow-400, .text-indigo-400, .text-pink-400 {
            color: white !important;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5) !important;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            color: #000000 !important;
            font-weight: 800 !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        .glass-effect *, .glass-effect *::before, .glass-effect *::after {
            color: #000000 !important;
            font-weight: 800 !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        .question-card {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateX(100px) scale(0.9);
            opacity: 0;
        }
        
        .question-card.active {
            transform: translateX(0) scale(1);
            opacity: 1;
        }
        
        .question-card.prev {
            transform: translateX(-100px) scale(0.9);
            opacity: 0;
        }
        
        .progress-bar {
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--primary-gradient);
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .option-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .option-card:hover::before {
            left: 100%;
        }
        
        .option-card:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .option-card.selected {
            background: var(--primary-gradient);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }
        
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .result-card {
            animation: resultAppear 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes resultAppear {
            0% { 
                transform: scale(0.8) rotateY(90deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.05) rotateY(45deg);
            }
            100% { 
                transform: scale(1) rotateY(0deg);
                opacity: 1;
            }
        }
        
        .percentage-circle {
            position: relative;
            width: 120px;
            height: 120px;
        }
        
        .percentage-circle svg {
            transform: rotate(-90deg);
        }
        
        .percentage-circle .circle-bg {
            fill: none;
            stroke: rgba(255,255,255,0.1);
            stroke-width: 8;
        }
        
        .percentage-circle .circle-progress {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-gradient {
            background: var(--primary-gradient);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            color: #ffffff;
        }
        
        .btn-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn-gradient:hover::before {
            left: 100%;
        }
        
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }
        
        .learning-style-icon {
            font-size: 4rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .stats-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            color: #000000 !important;
            font-weight: 800 !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        .stats-card *, .stats-card *::before, .stats-card *::after {
            color: #000000 !important;
            font-weight: 800 !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        .stats-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        
        .typing-animation {
            overflow: hidden;
            border-right: 2px solid;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: currentColor; }
        }

        .teacher-panel {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
        }
        
        .teacher-panel * {
            font-weight: 700 !important;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5) !important;
        }

        .student-card {
            transition: all 0.3s ease;
        }

        .student-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .chart-container {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body>
    <!-- Teacher Access Button -->
    <div class="fixed top-4 left-4 z-50">
        <button id="teacher-access-btn" onclick="showTeacherLogin()" class="glass-effect text-black p-3 rounded-full hover:scale-110 transition-all duration-300 shadow-lg" title="Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨">
            <i class="fas fa-chart-bar text-xl"></i>
        </button>
    </div>

    <!-- Results Summary Icon -->
    <div class="fixed top-4 right-4 z-50" id="results-summary-icon">
        <div class="glass-effect text-black p-3 rounded-full shadow-lg cursor-pointer hover:scale-110 transition-all duration-300" onclick="showQuickResults()" title="Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹ Ù„Ù„Ù†ØªØ§Ø¦Ø¬">
            <i class="fas fa-users text-xl"></i>
            <span id="total-participants" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold">0</span>
        </div>
    </div>

    <!-- Teacher Login Modal -->
    <div id="teacher-login-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="glass-effect rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-lock text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„Ù…</h3>
                <p class="text-white/80">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø§Ø¨</p>
            </div>
            <div class="space-y-4">
                <input type="password" id="teacher-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" 
                       class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div class="flex gap-3">
                    <button onclick="checkTeacherPassword()" class="flex-1 btn-gradient text-white font-semibold py-3 rounded-xl">
                        Ø¯Ø®ÙˆÙ„
                    </button>
                    <button onclick="hideTeacherLogin()" class="flex-1 glass-effect text-white font-semibold py-3 rounded-xl">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </div>
            <div class="mt-4 text-center">
                <p class="text-white/60 text-sm">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: teacher123</p>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard -->
    <div id="teacher-dashboard" class="hidden fixed inset-0 teacher-panel z-40 overflow-y-auto">
        <div class="container mx-auto px-4 py-8">
            <!-- Dashboard Header -->
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="text-4xl font-bold text-white mb-2">
                        <i class="fas fa-chart-bar ml-2"></i>
                        Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¹Ù„Ù…
                    </h1>
                    <p class="text-white/80">Ù†ØªØ§Ø¦Ø¬ ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</p>
                </div>
                <button onclick="hideTeacherDashboard()" class="glass-effect text-white p-3 rounded-full hover:scale-110 transition-all duration-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Statistics Overview -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="text-3xl text-blue-400 mb-2">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="text-2xl font-bold text-white" id="total-students">0</div>
                    <div class="text-white/80">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
                </div>
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="text-3xl text-green-400 mb-2">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="text-2xl font-bold text-white" id="visual-count">0</div>
                    <div class="text-white/80">Ù…ØªØ¹Ù„Ù… Ø¨ØµØ±ÙŠ</div>
                </div>
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="text-3xl text-purple-400 mb-2">
                        <i class="fas fa-ear-listen"></i>
                    </div>
                    <div class="text-2xl font-bold text-white" id="auditory-count">0</div>
                    <div class="text-white/80">Ù…ØªØ¹Ù„Ù… Ø³Ù…Ø¹ÙŠ</div>
                </div>
                <div class="glass-effect rounded-2xl p-6 text-center">
                    <div class="text-3xl text-orange-400 mb-2">
                        <i class="fas fa-hand-paper"></i>
                    </div>
                    <div class="text-2xl font-bold text-white" id="kinesthetic-count">0</div>
                    <div class="text-white/80">Ù…ØªØ¹Ù„Ù… Ø­Ø±ÙƒÙŠ</div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <!-- Pie Chart -->
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-chart-pie ml-2"></i>
                        ØªÙˆØ²ÙŠØ¹ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù…
                    </h3>
                    <div class="chart-container flex items-center justify-center">
                        <canvas id="pieChart" width="300" height="300"></canvas>
                    </div>
                </div>

                <!-- Bar Chart -->
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-chart-bar ml-2"></i>
                        Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ù†Ù…Ø§Ø·
                    </h3>
                    <div class="chart-container">
                        <canvas id="barChart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="glass-effect rounded-2xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                    <i class="fas fa-download ml-2"></i>
                    ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </h3>
                <div class="flex flex-wrap gap-4">
                    <button onclick="exportToCSV()" class="btn-gradient text-white px-6 py-3 rounded-xl flex items-center">
                        <i class="fas fa-file-csv ml-2"></i>
                        ØªØµØ¯ÙŠØ± CSV
                    </button>
                    <button onclick="exportToJSON()" class="glass-effect text-white px-6 py-3 rounded-xl flex items-center hover:bg-white/20">
                        <i class="fas fa-file-code ml-2"></i>
                        ØªØµØ¯ÙŠØ± JSON
                    </button>
                    <button onclick="generateReport()" class="glass-effect text-white px-6 py-3 rounded-xl flex items-center hover:bg-white/20">
                        <i class="fas fa-file-pdf ml-2"></i>
                        ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„
                    </button>
                    <button onclick="clearAllData()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl flex items-center">
                        <i class="fas fa-trash ml-2"></i>
                        Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>
            </div>

            <!-- Students List -->
            <div class="glass-effect rounded-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white flex items-center">
                        <i class="fas fa-list ml-2"></i>
                        Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬
                    </h3>
                    <div class="flex gap-2">
                        <select id="filter-style" onchange="filterStudents()" class="bg-white/10 text-white rounded-lg px-3 py-2 border border-white/20">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø·</option>
                            <option value="visual">Ø¨ØµØ±ÙŠ</option>
                            <option value="auditory">Ø³Ù…Ø¹ÙŠ</option>
                            <option value="kinesthetic">Ø­Ø±ÙƒÙŠ</option>
                        </select>
                        <input type="text" id="search-student" placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨..." 
                               onkeyup="searchStudents()" 
                               class="bg-white/10 text-white rounded-lg px-3 py-2 border border-white/20 placeholder-white/60">
                    </div>
                </div>
                <div id="students-list" class="space-y-4 max-h-96 overflow-y-auto">
                    <!-- Students will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Results Modal -->
    <div id="quick-results-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="glass-effect rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h3 class="text-2xl font-bold text-black mb-2">Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
                    <p class="text-gray-700">Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</p>
                </div>
                <button onclick="hideQuickResults()" class="text-gray-600 hover:text-gray-800 p-2">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- Quick Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-white/80 rounded-xl p-4 text-center">
                    <div class="text-2xl font-bold text-blue-600" id="quick-total">0</div>
                    <div class="text-sm text-gray-700">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</div>
                </div>
                <div class="bg-white/80 rounded-xl p-4 text-center">
                    <div class="text-2xl font-bold text-green-600" id="quick-visual">0</div>
                    <div class="text-sm text-gray-700">Ø¨ØµØ±ÙŠ</div>
                </div>
                <div class="bg-white/80 rounded-xl p-4 text-center">
                    <div class="text-2xl font-bold text-purple-600" id="quick-auditory">0</div>
                    <div class="text-sm text-gray-700">Ø³Ù…Ø¹ÙŠ</div>
                </div>
                <div class="bg-white/80 rounded-xl p-4 text-center">
                    <div class="text-2xl font-bold text-orange-600" id="quick-kinesthetic">0</div>
                    <div class="text-sm text-gray-700">Ø­Ø±ÙƒÙŠ</div>
                </div>
            </div>

            <!-- Recent Results -->
            <div class="mb-6">
                <h4 class="text-lg font-bold text-black mb-4">Ø¢Ø®Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h4>
                <div id="recent-results" class="space-y-3 max-h-60 overflow-y-auto">
                    <!-- Recent results will be populated here -->
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3">
                <button onclick="showTeacherLogin()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl">
                    Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
                </button>
                <button onclick="exportQuickCSV()" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-xl">
                    ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                </button>
            </div>
        </div>
    </div>

    <!-- Student Name Input Modal -->
    <div id="student-name-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="glass-effect rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!</h3>
                <p class="text-white/80">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„Ø­ÙØ¸ Ù†ØªØ§Ø¦Ø¬Ùƒ</p>
            </div>
            <div class="space-y-4">
                <input type="text" id="student-name-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨" 
                       class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div class="flex gap-3">
                    <button onclick="saveStudentName()" class="flex-1 btn-gradient text-white font-semibold py-3 rounded-xl">
                        Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    </button>
                    <button onclick="skipNameInput()" class="flex-1 glass-effect text-white font-semibold py-3 rounded-xl">
                        ØªØ®Ø·ÙŠ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Particles Background -->
    <div class="floating-particles">
        <div class="particle" style="left: 10%; top: 20%; width: 4px; height: 4px; animation-delay: 0s;"></div>
        <div class="particle" style="left: 20%; top: 80%; width: 6px; height: 6px; animation-delay: 1s;"></div>
        <div class="particle" style="left: 60%; top: 30%; width: 3px; height: 3px; animation-delay: 2s;"></div>
        <div class="particle" style="left: 80%; top: 70%; width: 5px; height: 5px; animation-delay: 3s;"></div>
        <div class="particle" style="left: 30%; top: 10%; width: 4px; height: 4px; animation-delay: 4s;"></div>
        <div class="particle" style="left: 70%; top: 90%; width: 6px; height: 6px; animation-delay: 5s;"></div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-5xl relative z-10">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="glass-effect rounded-3xl p-8 mb-8">
                <div class="learning-style-icon mb-6">
                    <i class="fas fa-brain"></i>
                </div>
                <h1 class="text-5xl font-bold text-black mb-4 typing-animation">Ø§Ø³ØªØ¨ÙŠØ§Ù† ØªØ­Ø¯ÙŠØ¯ Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù…</h1>
                <p class="text-xl text-black leading-relaxed max-w-2xl mx-auto">
                    Ø§ÙƒØªØ´Ù Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ù„ÙŠÙ„ Ø¹Ù„Ù…ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø·Ø±ÙŠÙ‚Ø© ØªØ¹Ù„Ù…Ùƒ
                </p>
                <div class="flex justify-center items-center mt-6 space-x-6 space-x-reverse">
                    <div class="flex items-center text-black">
                        <i class="fas fa-clock ml-2"></i>
                        <span>5 Ø¯Ù‚Ø§Ø¦Ù‚</span>
                    </div>
                    <div class="flex items-center text-black">
                        <i class="fas fa-chart-line ml-2"></i>
                        <span>ØªØ­Ù„ÙŠÙ„ Ø¯Ù‚ÙŠÙ‚</span>
                    </div>
                    <div class="flex items-center text-black">
                        <i class="fas fa-certificate ml-2"></i>
                        <span>Ù†ØªØ§Ø¦Ø¬ Ù…Ø®ØµØµØ©</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="mb-10">
            <div class="glass-effect rounded-2xl p-6">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center text-black">
                        <i class="fas fa-tasks ml-2"></i>
                        <span class="font-semibold">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù…</span>
                    </div>
                    <div class="text-black font-bold" id="progress-text">0 Ù…Ù† 12</div>
                </div>
                <div class="relative">
                    <div class="w-full bg-gray-300 rounded-full h-4 overflow-hidden">
                        <div class="progress-bar h-4 rounded-full" id="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-black text-sm font-semibold" id="progress-percentage">0%</div>
                </div>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="glass-effect rounded-3xl p-10 shadow-2xl">
            <!-- Questions will be inserted here -->
        </div>

        <!-- Results Container -->
        <div id="results-container" class="hidden">
            <!-- Results will be shown here -->
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between items-center mt-10" id="navigation">
            <button id="prev-btn" class="glass-effect text-black font-semibold py-4 px-8 rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 flex items-center" disabled>
                <i class="fas fa-arrow-right ml-2"></i>
                Ø§Ù„Ø³Ø§Ø¨Ù‚
            </button>
            
            <div class="flex space-x-2 space-x-reverse" id="question-dots">
                <!-- Question indicators will be inserted here -->
            </div>
            
            <button id="next-btn" class="btn-gradient text-white font-semibold py-4 px-8 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center" disabled>
                Ø§Ù„ØªØ§Ù„ÙŠ
                <i class="fas fa-arrow-left mr-2"></i>
            </button>
        </div>
    </div>

    <script>
        // Student Results Tracking System
        const TEACHER_PASSWORD = "teacher123"; // ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        let isTeacherMode = false;
        let currentStudentName = "";

        // Initialize results storage
        if (!localStorage.getItem('studentResults')) {
            localStorage.setItem('studentResults', JSON.stringify([]));
        }

        const questions = [
            {
                id: 1,
                text: "Ø¹Ù†Ø¯Ù…Ø§ Ø£ØªØ¹Ù„Ù… Ø´ÙŠØ¦Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ØŒ Ø£ÙØ¶Ù„:",
                options: [
                    { text: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ÙƒØªÙˆØ¨Ø©", type: "visual" },
                    { text: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„Ù‰ Ø´Ø±Ø­ Ø´ÙÙ‡ÙŠ", type: "auditory" },
                    { text: "Ø§Ù„ØªØ¬Ø±ÙŠØ¨ ÙˆØ§Ù„Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©", type: "kinesthetic" }
                ]
            },
            {
                id: 2,
                text: "Ø¹Ù†Ø¯ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ØŒ Ø£Ù…ÙŠÙ„ Ø¥Ù„Ù‰:",
                options: [
                    { text: "Ø±Ø³Ù… Ù…Ø®Ø·Ø·Ø§Øª Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£ÙÙƒØ§Ø±", type: "visual" },
                    { text: "Ù…Ù†Ø§Ù‚Ø´Ø© Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†", type: "auditory" },
                    { text: "ØªØ¬Ø±Ø¨Ø© Ø­Ù„ÙˆÙ„ Ù…Ø®ØªÙ„ÙØ© Ø¹Ù…Ù„ÙŠØ§Ù‹", type: "kinesthetic" }
                ]
            },
            {
                id: 3,
                text: "Ø£ØªØ°ÙƒØ± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ø¹Ù†Ø¯Ù…Ø§:",
                options: [
                    { text: "Ø£Ø±Ø§Ù‡Ø§ Ù…ÙƒØªÙˆØ¨Ø© Ø£Ùˆ ÙÙŠ ØµÙˆØ±", type: "visual" },
                    { text: "Ø£Ø³Ù…Ø¹Ù‡Ø§ Ø£Ùˆ Ø£ÙƒØ±Ø±Ù‡Ø§ Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù", type: "auditory" },
                    { text: "Ø£Ø±Ø¨Ø·Ù‡Ø§ Ø¨ØªØ¬Ø±Ø¨Ø© Ø¹Ù…Ù„ÙŠØ©", type: "kinesthetic" }
                ]
            },
            {
                id: 4,
                text: "ÙÙŠ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØŒ Ø£Ø±ÙƒØ² Ø£ÙƒØ«Ø± Ø¹Ù†Ø¯Ù…Ø§:",
                options: [
                    { text: "Ø£Ø±Ù‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠØ© ÙˆØ§Ù„Ù…Ø®Ø·Ø·Ø§Øª", type: "visual" },
                    { text: "Ø£Ø³ØªÙ…Ø¹ Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ÙˆØ§Ù„Ù…Ù†Ø§Ù‚Ø´Ø§Øª", type: "auditory" },
                    { text: "Ø£Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©", type: "kinesthetic" }
                ]
            },
            {
                id: 5,
                text: "Ø¹Ù†Ø¯ ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø£Ø¨Ø¯Ø£ Ø¨Ù€:",
                options: [
                    { text: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø£Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ", type: "visual" },
                    { text: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø´Ø®Øµ ÙŠØ´Ø±Ø­ Ù„ÙŠ", type: "auditory" },
                    { text: "Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ù„ØªØ¬Ø±ÙŠØ¨ Ù…Ø¨Ø§Ø´Ø±Ø©", type: "kinesthetic" }
                ]
            },
            {
                id: 6,
                text: "Ø£ÙØ¶Ù„ Ø§Ù„ÙƒØªØ¨ Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:",
                options: [
                    { text: "ØµÙˆØ± ÙˆÙ…Ø®Ø·Ø·Ø§Øª ÙˆØ±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ©", type: "visual" },
                    { text: "Ø­ÙˆØ§Ø±Ø§Øª ÙˆÙ‚ØµØµ ÙŠÙ…ÙƒÙ† Ù‚Ø±Ø§Ø¡ØªÙ‡Ø§ Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù", type: "auditory" },
                    { text: "ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ£Ù†Ø´Ø·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©", type: "kinesthetic" }
                ]
            },
            {
                id: 7,
                text: "Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø¹Ø·ÙŠ ØªÙˆØ¬ÙŠÙ‡Ø§Øª Ù„Ø´Ø®Øµ Ù…Ø§ØŒ Ø£ÙØ¶Ù„:",
                options: [
                    { text: "ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø£Ùˆ Ø±Ø³Ù… Ø®Ø±ÙŠØ·Ø©", type: "visual" },
                    { text: "Ø´Ø±Ø­Ù‡Ø§ Ø´ÙÙ‡ÙŠØ§Ù‹", type: "auditory" },
                    { text: "Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¹Ù…Ù„ÙŠØ§Ù‹", type: "kinesthetic" }
                ]
            },
            {
                id: 8,
                text: "ÙÙŠ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ÙØ±Ø§ØºØŒ Ø£Ø³ØªÙ…ØªØ¹ Ø¨Ù€:",
                options: [
                    { text: "Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø£Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø£ÙÙ„Ø§Ù…", type: "visual" },
                    { text: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø£Ùˆ Ø§Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª", type: "auditory" },
                    { text: "Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø£Ùˆ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©", type: "kinesthetic" }
                ]
            },
            {
                id: 9,
                text: "Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§ØªØŒ Ø£ÙØ¶Ù„:",
                options: [
                    { text: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ù„ÙˆÙ†Ø© ÙˆØ§Ù„Ù…Ø®Ø·Ø·Ø§Øª", type: "visual" },
                    { text: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø§Ø¯Ø© Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù Ø£Ùˆ Ù…Ù†Ø§Ù‚Ø´ØªÙ‡Ø§", type: "auditory" },
                    { text: "ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø®ØµØ§Øª ÙˆØ­Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†", type: "kinesthetic" }
                ]
            },
            {
                id: 10,
                text: "Ø£ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ù† Ø®Ù„Ø§Ù„:",
                options: [
                    { text: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†ØµÙˆØµ ÙˆÙ…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª", type: "visual" },
                    { text: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ ÙˆØ§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©", type: "auditory" },
                    { text: "Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±", type: "kinesthetic" }
                ]
            },
            {
                id: 11,
                text: "Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø­ØªØ§Ø¬ Ù„Ù„ØªØ±ÙƒÙŠØ²ØŒ Ø£ÙØ¶Ù„ Ø¨ÙŠØ¦Ø©:",
                options: [
                    { text: "Ù‡Ø§Ø¯Ø¦Ø© ÙˆÙ…Ù†Ø¸Ù…Ø© Ø¨ØµØ±ÙŠØ§Ù‹", type: "visual" },
                    { text: "Ù‡Ø§Ø¯Ø¦Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø£Ùˆ Ø¨Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø®ÙÙŠÙØ©", type: "auditory" },
                    { text: "ØªØ³Ù…Ø­ Ù„ÙŠ Ø¨Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„ØªÙ†Ù‚Ù„", type: "kinesthetic" }
                ]
            },
            {
                id: 12,
                text: "Ø£ÙÙ‡Ù… Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ø¹Ù†Ø¯Ù…Ø§:",
                options: [
                    { text: "Ø£Ø±Ø§Ù‡Ø§ ÙÙŠ Ø´ÙƒÙ„ Ø±Ø³ÙˆÙ… Ø£Ùˆ Ù…Ø®Ø·Ø·Ø§Øª", type: "visual" },
                    { text: "Ø£Ø³Ù…Ø¹ Ø´Ø±Ø­Ø§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ Ø¹Ù†Ù‡Ø§", type: "auditory" },
                    { text: "Ø£Ø·Ø¨Ù‚Ù‡Ø§ Ø¹Ù…Ù„ÙŠØ§Ù‹ Ø£Ùˆ Ø£Ø¬Ø±Ø¨ Ø£Ù…Ø«Ù„Ø©", type: "kinesthetic" }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = { visual: 0, auditory: 0, kinesthetic: 0 };

        // Teacher Functions
        function showTeacherLogin() {
            document.getElementById('teacher-login-modal').classList.remove('hidden');
            document.getElementById('teacher-password').focus();
        }

        function hideTeacherLogin() {
            document.getElementById('teacher-login-modal').classList.add('hidden');
            document.getElementById('teacher-password').value = '';
        }

        function checkTeacherPassword() {
            const password = document.getElementById('teacher-password').value;
            if (password === TEACHER_PASSWORD) {
                isTeacherMode = true;
                hideTeacherLogin();
                showTeacherDashboard();
            } else {
                showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                document.getElementById('teacher-password').value = '';
            }
        }

        function showTeacherDashboard() {
            document.getElementById('teacher-dashboard').classList.remove('hidden');
            loadTeacherDashboard();
        }

        function hideTeacherDashboard() {
            document.getElementById('teacher-dashboard').classList.add('hidden');
            isTeacherMode = false;
        }

        function loadTeacherDashboard() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            
            // Update statistics
            document.getElementById('total-students').textContent = results.length;
            
            const styleCounts = {
                visual: results.filter(r => r.dominantStyle === 'visual').length,
                auditory: results.filter(r => r.dominantStyle === 'auditory').length,
                kinesthetic: results.filter(r => r.dominantStyle === 'kinesthetic').length
            };
            
            document.getElementById('visual-count').textContent = styleCounts.visual;
            document.getElementById('auditory-count').textContent = styleCounts.auditory;
            document.getElementById('kinesthetic-count').textContent = styleCounts.kinesthetic;
            
            // Draw charts
            drawPieChart(styleCounts);
            drawBarChart(styleCounts);
            
            // Load students list
            loadStudentsList(results);
        }

        function drawPieChart(styleCounts) {
            const canvas = document.getElementById('pieChart');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 100;
            
            const total = styleCounts.visual + styleCounts.auditory + styleCounts.kinesthetic;
            if (total === 0) return;
            
            const colors = ['#10B981', '#8B5CF6', '#F59E0B'];
            const labels = ['Ø¨ØµØ±ÙŠ', 'Ø³Ù…Ø¹ÙŠ', 'Ø­Ø±ÙƒÙŠ'];
            const values = [styleCounts.visual, styleCounts.auditory, styleCounts.kinesthetic];
            
            let currentAngle = 0;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            values.forEach((value, index) => {
                const sliceAngle = (value / total) * 2 * Math.PI;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.closePath();
                ctx.fillStyle = colors[index];
                ctx.fill();
                
                // Add labels
                const labelAngle = currentAngle + sliceAngle / 2;
                const labelX = centerX + Math.cos(labelAngle) * (radius * 0.7);
                const labelY = centerY + Math.sin(labelAngle) * (radius * 0.7);
                
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Cairo';
                ctx.textAlign = 'center';
                ctx.fillText(`${labels[index]}`, labelX, labelY);
                ctx.fillText(`${Math.round((value/total)*100)}%`, labelX, labelY + 20);
                
                currentAngle += sliceAngle;
            });
        }

        function drawBarChart(styleCounts) {
            const canvas = document.getElementById('barChart');
            const ctx = canvas.getContext('2d');
            const maxValue = Math.max(styleCounts.visual, styleCounts.auditory, styleCounts.kinesthetic) || 1;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const barWidth = 80;
            const barSpacing = 60;
            const startX = 60;
            const maxBarHeight = 200;
            
            const colors = ['#10B981', '#8B5CF6', '#F59E0B'];
            const labels = ['Ø¨ØµØ±ÙŠ', 'Ø³Ù…Ø¹ÙŠ', 'Ø­Ø±ÙƒÙŠ'];
            const values = [styleCounts.visual, styleCounts.auditory, styleCounts.kinesthetic];
            
            values.forEach((value, index) => {
                const barHeight = (value / maxValue) * maxBarHeight;
                const x = startX + index * (barWidth + barSpacing);
                const y = canvas.height - barHeight - 50;
                
                // Draw bar
                ctx.fillStyle = colors[index];
                ctx.fillRect(x, y, barWidth, barHeight);
                
                // Draw value on top
                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px Cairo';
                ctx.textAlign = 'center';
                ctx.fillText(value.toString(), x + barWidth/2, y - 10);
                
                // Draw label
                ctx.fillText(labels[index], x + barWidth/2, canvas.height - 20);
            });
        }

        function loadStudentsList(results) {
            const container = document.getElementById('students-list');
            
            if (results.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl text-white/30 mb-4">
                            <i class="fas fa-users"></i>
                        </div>
                        <p class="text-white/60 text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø·Ù„Ø§Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                        <p class="text-white/40">Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† Ù…Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = results.map((result, index) => {
                const styleInfo = {
                    visual: { name: "Ø¨ØµØ±ÙŠ", icon: "fas fa-eye", color: "green" },
                    auditory: { name: "Ø³Ù…Ø¹ÙŠ", icon: "fas fa-ear-listen", color: "purple" },
                    kinesthetic: { name: "Ø­Ø±ÙƒÙŠ", icon: "fas fa-hand-paper", color: "orange" }
                };
                
                const style = styleInfo[result.dominantStyle];
                const date = new Date(result.timestamp).toLocaleDateString('ar-SA');
                const time = new Date(result.timestamp).toLocaleTimeString('ar-SA');
                
                return `
                    <div class="student-card glass-effect rounded-xl p-6 student-item" data-style="${result.dominantStyle}" data-name="${result.name.toLowerCase()}">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-${style.color}-500/20 flex items-center justify-center ml-4">
                                    <i class="${style.icon} text-${style.color}-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-semibold text-lg">${result.name}</h4>
                                    <p class="text-white/70">Ù…ØªØ¹Ù„Ù… ${style.name}</p>
                                </div>
                            </div>
                            <div class="text-left">
                                <div class="text-white/60 text-sm">${date}</div>
                                <div class="text-white/60 text-sm">${time}</div>
                            </div>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-4">
                            <div class="text-center">
                                <div class="text-green-400 font-bold">${result.percentages.visual}%</div>
                                <div class="text-white/60 text-sm">Ø¨ØµØ±ÙŠ</div>
                            </div>
                            <div class="text-center">
                                <div class="text-purple-400 font-bold">${result.percentages.auditory}%</div>
                                <div class="text-white/60 text-sm">Ø³Ù…Ø¹ÙŠ</div>
                            </div>
                            <div class="text-center">
                                <div class="text-orange-400 font-bold">${result.percentages.kinesthetic}%</div>
                                <div class="text-white/60 text-sm">Ø­Ø±ÙƒÙŠ</div>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="deleteStudentResult(${index})" class="text-red-400 hover:text-red-300 p-2">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filterStudents() {
            const filter = document.getElementById('filter-style').value;
            const students = document.querySelectorAll('.student-item');
            
            students.forEach(student => {
                if (filter === 'all' || student.dataset.style === filter) {
                    student.style.display = 'block';
                } else {
                    student.style.display = 'none';
                }
            });
        }

        function searchStudents() {
            const search = document.getElementById('search-student').value.toLowerCase();
            const students = document.querySelectorAll('.student-item');
            
            students.forEach(student => {
                if (student.dataset.name.includes(search)) {
                    student.style.display = 'block';
                } else {
                    student.style.display = 'none';
                }
            });
        }

        function deleteStudentResult(index) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù†ØªÙŠØ¬Ø© Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ')) {
                const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
                results.splice(index, 1);
                localStorage.setItem('studentResults', JSON.stringify(results));
                loadTeacherDashboard();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function exportToCSV() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            if (results.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
                return;
            }
            
            const headers = ['Ø§Ù„Ø§Ø³Ù…', 'Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†', 'Ø¨ØµØ±ÙŠ %', 'Ø³Ù…Ø¹ÙŠ %', 'Ø­Ø±ÙƒÙŠ %', 'Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ø§Ù„ÙˆÙ‚Øª', 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª'];
            const csvContent = [
                headers.join(','),
                ...results.map(result => [
                    `"${result.name}"`,
                    result.dominantStyle === 'visual' ? 'Ø¨ØµØ±ÙŠ' : result.dominantStyle === 'auditory' ? 'Ø³Ù…Ø¹ÙŠ' : 'Ø­Ø±ÙƒÙŠ',
                    result.percentages.visual + '%',
                    result.percentages.auditory + '%',
                    result.percentages.kinesthetic + '%',
                    new Date(result.timestamp).toLocaleDateString('ar-SA'),
                    new Date(result.timestamp).toLocaleTimeString('ar-SA'),
                    (result.answers.visual + result.answers.auditory + result.answers.kinesthetic)
                ].join(','))
            ].join('\n');
            
            const blob = new Blob(['\ufeff' + csvContent], { 
                type: 'text/csv;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Ù†ØªØ§Ø¦Ø¬-Ø§Ù„Ø·Ù„Ø§Ø¨-${new Date().toISOString().split('T')[0]}.csv`;
            
            // Ensure download happens
            document.body.appendChild(a);
            a.style.display = 'none';
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ“Š', 'success');
        }

        function exportToJSON() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            if (results.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
                return;
            }
            
            // Create enhanced JSON with metadata
            const exportData = {
                metadata: {
                    exportDate: new Date().toISOString(),
                    totalStudents: results.length,
                    exportedBy: "Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù…",
                    version: "1.0"
                },
                summary: {
                    visual: results.filter(r => r.dominantStyle === 'visual').length,
                    auditory: results.filter(r => r.dominantStyle === 'auditory').length,
                    kinesthetic: results.filter(r => r.dominantStyle === 'kinesthetic').length
                },
                studentResults: results
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { 
                type: 'application/json;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Ù†ØªØ§Ø¦Ø¬-Ø§Ù„Ø·Ù„Ø§Ø¨-${new Date().toISOString().split('T')[0]}.json`;
            
            // Ensure download happens
            document.body.appendChild(a);
            a.style.display = 'none';
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ’¾', 'success');
        }

        function generateReport() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            if (results.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±', 'error');
                return;
            }
            
            const styleCounts = {
                visual: results.filter(r => r.dominantStyle === 'visual').length,
                auditory: results.filter(r => r.dominantStyle === 'auditory').length,
                kinesthetic: results.filter(r => r.dominantStyle === 'kinesthetic').length
            };
            
            const averagePercentages = {
                visual: Math.round(results.reduce((sum, r) => sum + r.percentages.visual, 0) / results.length),
                auditory: Math.round(results.reduce((sum, r) => sum + r.percentages.auditory, 0) / results.length),
                kinesthetic: Math.round(results.reduce((sum, r) => sum + r.percentages.kinesthetic, 0) / results.length)
            };
            
            const reportContent = `ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ - ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù… Ù„Ù„Ø·Ù„Ø§Ø¨
=====================================================

Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ±:
- ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}
- ÙˆÙ‚Øª Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleTimeString('ar-SA')}
- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†: ${results.length}
- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†: ${questions.length}

=====================================================
Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©:
=====================================================

ØªÙˆØ²ÙŠØ¹ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù…:
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙˆÙ† Ø§Ù„Ø¨ØµØ±ÙŠÙˆÙ†: ${styleCounts.visual} Ø·Ø§Ù„Ø¨ (${Math.round((styleCounts.visual/results.length)*100)}%)
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙˆÙ† Ø§Ù„Ø³Ù…Ø¹ÙŠÙˆÙ†: ${styleCounts.auditory} Ø·Ø§Ù„Ø¨ (${Math.round((styleCounts.auditory/results.length)*100)}%)
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙˆÙ† Ø§Ù„Ø­Ø±ÙƒÙŠÙˆÙ†: ${styleCounts.kinesthetic} Ø·Ø§Ù„Ø¨ (${Math.round((styleCounts.kinesthetic/results.length)*100)}%)

Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ø§Ù‹: ${
    styleCounts.visual > styleCounts.auditory && styleCounts.visual > styleCounts.kinesthetic ? 'Ø§Ù„Ø¨ØµØ±ÙŠ' :
    styleCounts.auditory > styleCounts.kinesthetic ? 'Ø§Ù„Ø³Ù…Ø¹ÙŠ' : 'Ø§Ù„Ø­Ø±ÙƒÙŠ'
}

Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ©:
â€¢ Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø¨ØµØ±ÙŠ: ${averagePercentages.visual}%
â€¢ Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø³Ù…Ø¹ÙŠ: ${averagePercentages.auditory}%
â€¢ Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø­Ø±ÙƒÙŠ: ${averagePercentages.kinesthetic}%

=====================================================
ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨:
=====================================================

${results.map((result, index) => `${index + 1}. Ø§Ù„Ø·Ø§Ù„Ø¨: ${result.name}
   Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†: ${result.dominantStyle === 'visual' ? 'Ø¨ØµØ±ÙŠ' : result.dominantStyle === 'auditory' ? 'Ø³Ù…Ø¹ÙŠ' : 'Ø­Ø±ÙƒÙŠ'}
   Ø§Ù„ØªÙˆØ²ÙŠØ¹: Ø¨ØµØ±ÙŠ ${result.percentages.visual}% | Ø³Ù…Ø¹ÙŠ ${result.percentages.auditory}% | Ø­Ø±ÙƒÙŠ ${result.percentages.kinesthetic}%
   ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${new Date(result.timestamp).toLocaleDateString('ar-SA')}
   ÙˆÙ‚Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${new Date(result.timestamp).toLocaleTimeString('ar-SA')}
   Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª: ${result.answers.visual + result.answers.auditory + result.answers.kinesthetic}
`).join('\n')}

=====================================================
Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©:
=====================================================

Ù„Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø¨ØµØ±ÙŠÙŠÙ† (${styleCounts.visual} Ø·Ø§Ù„Ø¨):
â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„ØµÙˆØ±
â€¢ Ø§Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙÙŠ Ø§Ù„ØªÙ…ÙŠÙŠØ² ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ…
â€¢ ÙˆÙØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø±Ø¦ÙŠØ© ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠØ©
â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø°Ù‡Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø±Ù…Ø²Ø©

Ù„Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø³Ù…Ø¹ÙŠÙŠÙ† (${styleCounts.auditory} Ø·Ø§Ù„Ø¨):
â€¢ Ø§Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø§Øª ÙˆØ§Ù„Ø´Ø±Ø­ Ø§Ù„Ø´ÙÙ‡ÙŠ
â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© ÙˆØ§Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª
â€¢ Ø´Ø¬Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù ÙˆØ§Ù„Ø­ÙˆØ§Ø±
â€¢ ÙˆÙØ± Ø¨ÙŠØ¦Ø© Ù‡Ø§Ø¯Ø¦Ø© Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ ÙˆØ§Ù„ØªØ±ÙƒÙŠØ²

Ù„Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø­Ø±ÙƒÙŠÙŠÙ† (${styleCounts.kinesthetic} Ø·Ø§Ù„Ø¨):
â€¢ ÙˆÙØ± Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø¨
â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ù„Ù…Ø¬Ø³Ù…Ø§Øª Ø§Ù„Ù…Ù„Ù…ÙˆØ³Ø©
â€¢ Ø´Ø¬Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© ÙˆØ§Ù„Ø­Ø±ÙƒØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¹Ù„Ù…
â€¢ Ø§Ø³Ù…Ø­ Ø¨ÙØªØ±Ø§Øª Ø±Ø§Ø­Ø© Ù„Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ù†Ø´Ø§Ø·

=====================================================
Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:
=====================================================

1. Ø§Ù„ØªÙ†ÙˆÙŠØ¹ ÙÙŠ Ø·Ø±Ù‚ Ø§Ù„ØªØ¯Ø±ÙŠØ³ Ù„ØªÙ†Ø§Ø³Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø·
2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ ÙˆØ§Ù„Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ø³
3. ØªÙˆÙÙŠØ± Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø© Ù„Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ¹Ù„Ù…
4. ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø­Ø³Ø¨ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø£Ø­ÙŠØ§Ù†Ø§Ù‹
5. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ù„Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù…

=====================================================
Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:
=====================================================

â€¢ Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¨ÙŠØ§Ù† Ù…ÙƒÙˆÙ† Ù…Ù† ${questions.length} Ø³Ø¤Ø§Ù„
â€¢ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªØ¹ÙƒØ³ Ø§Ù„Ù…ÙŠÙˆÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆÙ‚Ø¯ ØªØªØºÙŠØ± Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª
â€¢ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ ÙŠØ¬Ù…Ø¹ÙˆÙ† Ø¨ÙŠÙ† Ø£ÙƒØ«Ø± Ù…Ù† Ù†Ù…Ø· ØªØ¹Ù„Ù… ÙˆØ§Ø­Ø¯
â€¢ ÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¯ÙˆØ±ÙŠØ§Ù‹ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ·ÙˆØ±

=====================================================
ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©:
Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
Ø¥ØµØ¯Ø§Ø± 1.0
=====================================================`;
            
            const blob = new Blob(['\ufeff' + reportContent], { 
                type: 'text/plain;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ØªÙ‚Ø±ÙŠØ±-Ø´Ø§Ù…Ù„-Ø£Ù†Ù…Ø§Ø·-Ø§Ù„ØªØ¹Ù„Ù…-${new Date().toISOString().split('T')[0]}.txt`;
            
            // Ensure download happens
            document.body.appendChild(a);
            a.style.display = 'none';
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“‹', 'success');
        }

        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                localStorage.removeItem('studentResults');
                localStorage.setItem('studentResults', JSON.stringify([]));
                loadTeacherDashboard();
                showNotification('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // Student Name Functions
        function showStudentNameModal() {
            document.getElementById('student-name-modal').classList.remove('hidden');
            document.getElementById('student-name-input').focus();
        }

        function saveStudentName() {
            const name = document.getElementById('student-name-input').value.trim();
            if (name) {
                currentStudentName = name;
                document.getElementById('student-name-modal').classList.add('hidden');
                renderQuestion();
            } else {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ', 'error');
            }
        }

        function skipNameInput() {
            currentStudentName = "Ø·Ø§Ù„Ø¨ Ù…Ø¬Ù‡ÙˆÙ„";
            document.getElementById('student-name-modal').classList.add('hidden');
            renderQuestion();
        }

        // Save student result
        function saveStudentResult(dominantStyle, percentages) {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            
            const newResult = {
                name: currentStudentName,
                dominantStyle: dominantStyle,
                percentages: percentages,
                answers: answers,
                timestamp: new Date().toISOString()
            };
            
            results.push(newResult);
            localStorage.setItem('studentResults', JSON.stringify(results));
            
            // Update participants count
            updateParticipantsCount();
        }

        function renderQuestion() {
            const container = document.getElementById('quiz-container');
            const question = questions[currentQuestion];
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-lg ml-4">
                                ${currentQuestion + 1}
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-black">Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestion + 1}</h2>
                                <p class="text-gray-700">Ù…Ù† Ø£ØµÙ„ ${questions.length} Ø£Ø³Ø¦Ù„Ø©</p>
                            </div>
                        </div>
                        <div class="text-gray-600">
                            <i class="fas fa-question-circle text-3xl"></i>
                        </div>
                    </div>
                    
                    <div class="bg-white/80 rounded-2xl p-6 mb-8 backdrop-blur-sm">
                        <p class="text-xl text-black leading-relaxed font-medium">${question.text}</p>
                    </div>
                    
                    <div class="space-y-4">
                        ${question.options.map((option, index) => `
                            <label class="option-card flex items-center p-6 bg-white/80 backdrop-blur-sm rounded-2xl cursor-pointer border-2 border-transparent hover:border-gray-400">
                                <div class="relative ml-4">
                                    <input type="radio" name="question${question.id}" value="${option.type}" class="sr-only">
                                    <div class="w-6 h-6 rounded-full border-2 border-gray-500 flex items-center justify-center radio-custom">
                                        <div class="w-3 h-3 rounded-full bg-blue-600 opacity-0 transition-opacity duration-200"></div>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <span class="text-black text-lg font-medium leading-relaxed">${option.text}</span>
                                </div>
                                <div class="text-gray-600">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;

            updateProgress();
            updateNavigation();
            updateQuestionDots();
            
            // Add event listeners for radio buttons
            const labels = container.querySelectorAll('label.option-card');
            labels.forEach(label => {
                label.addEventListener('click', () => {
                    // Remove selected class from all options
                    labels.forEach(l => l.classList.remove('selected'));
                    // Add selected class to clicked option
                    label.classList.add('selected');
                    
                    // Update radio button visual
                    const radio = label.querySelector('input[type="radio"]');
                    const customRadio = label.querySelector('.radio-custom div');
                    
                    // Reset all custom radios
                    container.querySelectorAll('.radio-custom div').forEach(r => r.style.opacity = '0');
                    // Show selected radio
                    customRadio.style.opacity = '1';
                    
                    radio.checked = true;
                    document.getElementById('next-btn').disabled = false;
                    
                    // Add a subtle animation
                    label.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        label.style.transform = 'scale(1)';
                    }, 150);
                });
            });
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${currentQuestion + 1} Ù…Ù† ${questions.length}`;
            document.getElementById('progress-percentage').textContent = `${Math.round(progress)}%`;
        }

        function updateNavigation() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = true;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.innerHTML = `
                    Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                    <i class="fas fa-chart-bar mr-2"></i>
                `;
            } else {
                nextBtn.innerHTML = `
                    Ø§Ù„ØªØ§Ù„ÙŠ
                    <i class="fas fa-arrow-left mr-2"></i>
                `;
            }
        }

        function updateQuestionDots() {
            const dotsContainer = document.getElementById('question-dots');
            dotsContainer.innerHTML = '';
            
            for (let i = 0; i < questions.length; i++) {
                const dot = document.createElement('div');
                dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${
                    i === currentQuestion 
                        ? 'bg-white scale-125' 
                        : i < currentQuestion 
                            ? 'bg-green-400' 
                            : 'bg-white/30'
                }`;
                dotsContainer.appendChild(dot);
            }
        }

        function saveAnswer() {
            const selectedOption = document.querySelector(`input[name="question${questions[currentQuestion].id}"]:checked`);
            if (selectedOption) {
                answers[selectedOption.value]++;
            }
        }

        function showResults() {
            const total = Object.values(answers).reduce((sum, count) => sum + count, 0);
            const percentages = {
                visual: Math.round((answers.visual / total) * 100),
                auditory: Math.round((answers.auditory / total) * 100),
                kinesthetic: Math.round((answers.kinesthetic / total) * 100)
            };

            const dominantStyle = Object.keys(percentages).reduce((a, b) => 
                percentages[a] > percentages[b] ? a : b
            );

            // Save student result
            saveStudentResult(dominantStyle, percentages);

            const styleInfo = {
                visual: {
                    name: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¨ØµØ±ÙŠ",
                    icon: "ğŸ‘ï¸",
                    description: "ØªØªØ¹Ù„Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©",
                    characteristics: [
                        "ØªÙØ¶Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø®Ø·Ø·Ø§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©",
                        "ØªØªØ°ÙƒØ± Ø§Ù„ÙˆØ¬ÙˆÙ‡ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡",
                        "ØªØ­Ø¨ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨ØµØ±ÙŠØ§Ù‹",
                        "ØªØ³ØªÙÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¨ØµØ±ÙŠ"
                    ],
                    tips: [
                        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø°Ù‡Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ø®Ø·Ø·Ø§Øª",
                        "Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø£Ù„ÙˆØ§Ù† Ù…Ø®ØªÙ„ÙØ©",
                        "Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©",
                        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ©"
                    ]
                },
                auditory: {
                    name: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø³Ù…Ø¹ÙŠ",
                    icon: "ğŸ‘‚",
                    description: "ØªØªØ¹Ù„Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ ÙˆØ§Ù„Ø­Ø¯ÙŠØ«",
                    characteristics: [
                        "ØªÙØ¶Ù„ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø§Ù‚Ø´Ø§Øª",
                        "ØªØªØ°ÙƒØ± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„ÙˆØ¬ÙˆÙ‡",
                        "ØªØ­Ø¨ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØ§Ù„Ø¥ÙŠÙ‚Ø§Ø¹",
                        "ØªØ³ØªÙÙŠØ¯ Ù…Ù† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù"
                    ],
                    tips: [
                        "Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù",
                        "Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø§Øª Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©",
                        "Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©",
                        "Ø³Ø¬Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©"
                    ]
                },
                kinesthetic: {
                    name: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙƒÙŠ",
                    icon: "ğŸ¤²",
                    description: "ØªØªØ¹Ù„Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© ÙˆØ§Ù„Ø­Ø±ÙƒØ©",
                    characteristics: [
                        "ØªÙØ¶Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ¬Ø±Ø¨Ø©",
                        "ØªØ­ØªØ§Ø¬ Ù„Ù„Ø­Ø±ÙƒØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙÙƒÙŠØ±",
                        "ØªØªØ¹Ù„Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©",
                        "ØªØ³ØªÙÙŠØ¯ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠØ¯ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…"
                    ],
                    tips: [
                        "Ù…Ø§Ø±Ø³ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø¨",
                        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ù„Ù…Ø¬Ø³Ù…Ø§Øª",
                        "Ø®Ø° ÙØªØ±Ø§Øª Ø±Ø§Ø­Ø© Ù„Ù„Ø­Ø±ÙƒØ©",
                        "Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯"
                    ]
                }
            };

            const resultHTML = `
                <div class="result-card glass-effect rounded-3xl p-10 shadow-2xl">
                    <!-- Header Section -->
                    <div class="text-center mb-12">
                        <div class="relative inline-block mb-6">
                            <div class="learning-style-icon text-8xl mb-4">
                                ${styleInfo[dominantStyle].icon === "ğŸ‘ï¸" ? '<i class="fas fa-eye"></i>' : 
                                  styleInfo[dominantStyle].icon === "ğŸ‘‚" ? '<i class="fas fa-ear-listen"></i>' : 
                                  '<i class="fas fa-hand-paper"></i>'}
                            </div>
                            <div class="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-check text-white text-xs"></i>
                            </div>
                        </div>
                        <h2 class="text-4xl font-bold text-black mb-4">ğŸ‰ ØªÙ… ØªØ­Ù„ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ!</h2>
                        <div class="bg-white/90 rounded-2xl p-6 backdrop-blur-sm">
                            <h3 class="text-3xl font-bold text-black mb-2">${styleInfo[dominantStyle].name}</h3>
                            <p class="text-xl text-black leading-relaxed">${styleInfo[dominantStyle].description}</p>
                        </div>
                        ${currentStudentName !== "Ø·Ø§Ù„Ø¨ Ù…Ø¬Ù‡ÙˆÙ„" ? `
                            <div class="mt-4 text-black">
                                <i class="fas fa-user ml-2"></i>
                                Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentStudentName}! ØªÙ… Ø­ÙØ¸ Ù†ØªØ§Ø¦Ø¬Ùƒ Ø¨Ù†Ø¬Ø§Ø­
                            </div>
                        ` : ''}
                    </div>

                    <!-- Statistics Section -->
                    <div class="grid md:grid-cols-3 gap-6 mb-12">
                        ${Object.keys(percentages).map(style => `
                            <div class="stats-card rounded-2xl p-6 text-center ${style === dominantStyle ? 'ring-2 ring-white/50' : ''}">
                                <div class="percentage-circle mx-auto mb-4">
                                    <svg width="120" height="120">
                                        <circle class="circle-bg" cx="60" cy="60" r="52"></circle>
                                        <circle class="circle-progress" cx="60" cy="60" r="52" 
                                                stroke="${style === dominantStyle ? '#10B981' : '#6B7280'}"
                                                stroke-dasharray="${(percentages[style] / 100) * 326.73} 326.73"
                                                stroke-dashoffset="0">
                                        </circle>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-black">${percentages[style]}%</div>
                                            <div class="text-sm text-gray-700">${styleInfo[style].name.split(' ')[1]}</div>
                                        </div>
                                    </div>
                                </div>
                                <h4 class="font-bold text-black mb-2">${styleInfo[style].name}</h4>
                                <div class="text-4xl mb-2">
                                    ${styleInfo[style].icon === "ğŸ‘ï¸" ? '<i class="fas fa-eye text-blue-600"></i>' : 
                                      styleInfo[style].icon === "ğŸ‘‚" ? '<i class="fas fa-ear-listen text-purple-600"></i>' : 
                                      '<i class="fas fa-hand-paper text-green-600"></i>'}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Details Section -->
                    <div class="grid lg:grid-cols-2 gap-8 mb-10">
                        <div class="glass-effect rounded-2xl p-8">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center ml-4">
                                    <i class="fas fa-star text-white"></i>
                                </div>
                                <h4 class="text-2xl font-bold text-black">Ø®ØµØ§Ø¦ØµÙƒ ÙƒÙ…ØªØ¹Ù„Ù…</h4>
                            </div>
                            <div class="space-y-4">
                                ${styleInfo[dominantStyle].characteristics.map((char, index) => 
                                    `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm">
                                        <div class="w-8 h-8 rounded-full bg-green-500/30 flex items-center justify-center ml-3 mt-1">
                                            <span class="text-green-700 font-bold text-sm">${index + 1}</span>
                                        </div>
                                        <span class="text-black leading-relaxed">${char}</span>
                                    </div>`
                                ).join('')}
                            </div>
                        </div>

                        <div class="glass-effect rounded-2xl p-8">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center ml-4">
                                    <i class="fas fa-lightbulb text-white"></i>
                                </div>
                                <h4 class="text-2xl font-bold text-black">Ù†ØµØ§Ø¦Ø­ Ù„Ù„ØªØ¹Ù„Ù… Ø§Ù„ÙØ¹Ø§Ù„</h4>
                            </div>
                            <div class="space-y-4">
                                ${styleInfo[dominantStyle].tips.map((tip, index) => 
                                    `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm">
                                        <div class="w-8 h-8 rounded-full bg-blue-500/30 flex items-center justify-center ml-3 mt-1">
                                            <i class="fas fa-check text-blue-700 text-sm"></i>
                                        </div>
                                        <span class="text-black leading-relaxed">${tip}</span>
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- Study Tips Section -->
                    <div class="mb-10">
                        <div class="text-center mb-8">
                            <h3 class="text-3xl font-bold text-black mb-4">
                                <i class="fas fa-graduation-cap ml-2"></i>
                                Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø®ØµØµ Ù„Ùƒ
                            </h3>
                            <p class="text-black text-lg">Ù†ØµØ§Ø¦Ø­ Ø¹Ù…Ù„ÙŠØ© Ù…ØµÙ…Ù…Ø© Ø®ØµÙŠØµØ§Ù‹ Ù„Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
                        </div>

                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Study Techniques -->
                            <div class="glass-effect rounded-2xl p-8">
                                <div class="flex items-center mb-6">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center ml-4">
                                        <i class="fas fa-book-open text-white"></i>
                                    </div>
                                    <h4 class="text-2xl font-bold text-black">ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</h4>
                                </div>
                                <div class="space-y-4">
                                    ${getStudyTechniques(dominantStyle).map((technique, index) => 
                                        `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm hover:bg-white transition-all duration-300">
                                            <div class="w-8 h-8 rounded-full bg-purple-500/30 flex items-center justify-center ml-3 mt-1">
                                                <i class="fas fa-arrow-left text-purple-700 text-sm"></i>
                                            </div>
                                            <div>
                                                <h5 class="text-black font-semibold mb-1">${technique.title}</h5>
                                                <p class="text-gray-700 text-sm leading-relaxed">${technique.description}</p>
                                            </div>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>

                            <!-- Environment Setup -->
                            <div class="glass-effect rounded-2xl p-8">
                                <div class="flex items-center mb-6">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center ml-4">
                                        <i class="fas fa-home text-white"></i>
                                    </div>
                                    <h4 class="text-2xl font-bold text-black">Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©</h4>
                                </div>
                                <div class="space-y-4">
                                    ${getEnvironmentTips(dominantStyle).map((tip, index) => 
                                        `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm hover:bg-white transition-all duration-300">
                                            <div class="w-8 h-8 rounded-full bg-orange-500/30 flex items-center justify-center ml-3 mt-1">
                                                <i class="fas fa-check text-orange-700 text-sm"></i>
                                            </div>
                                            <span class="text-black leading-relaxed">${tip}</span>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>

                            <!-- Memory Techniques -->
                            <div class="glass-effect rounded-2xl p-8">
                                <div class="flex items-center mb-6">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-teal-500 to-cyan-500 flex items-center justify-center ml-4">
                                        <i class="fas fa-brain text-white"></i>
                                    </div>
                                    <h4 class="text-2xl font-bold text-black">ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ°ÙƒØ±</h4>
                                </div>
                                <div class="space-y-4">
                                    ${getMemoryTechniques(dominantStyle).map((technique, index) => 
                                        `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm hover:bg-white transition-all duration-300">
                                            <div class="w-8 h-8 rounded-full bg-teal-500/30 flex items-center justify-center ml-3 mt-1">
                                                <i class="fas fa-lightbulb text-teal-700 text-sm"></i>
                                            </div>
                                            <div>
                                                <h5 class="text-black font-semibold mb-1">${technique.title}</h5>
                                                <p class="text-gray-700 text-sm leading-relaxed">${technique.description}</p>
                                            </div>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>

                            <!-- Exam Preparation -->
                            <div class="glass-effect rounded-2xl p-8">
                                <div class="flex items-center mb-6">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center ml-4">
                                        <i class="fas fa-clipboard-check text-white"></i>
                                    </div>
                                    <h4 class="text-2xl font-bold text-black">Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</h4>
                                </div>
                                <div class="space-y-4">
                                    ${getExamStrategies(dominantStyle).map((strategy, index) => 
                                        `<div class="flex items-start p-4 bg-white/90 rounded-xl backdrop-blur-sm hover:bg-white transition-all duration-300">
                                            <div class="w-8 h-8 rounded-full bg-yellow-500/30 flex items-center justify-center ml-3 mt-1">
                                                <i class="fas fa-star text-yellow-700 text-sm"></i>
                                            </div>
                                            <span class="text-black leading-relaxed">${strategy}</span>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>

                        <!-- Additional Resources -->
                        <div class="glass-effect rounded-2xl p-8 mt-8">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-tools text-white text-2xl"></i>
                                </div>
                                <h4 class="text-2xl font-bold text-black mb-2">Ø£Ø¯ÙˆØ§Øª ÙˆÙ…ÙˆØ§Ø±Ø¯ Ù…ÙÙŠØ¯Ø©</h4>
                                <p class="text-black">ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙ…ÙˆØ§Ù‚Ø¹ ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù… Ø¨Ø·Ø±ÙŠÙ‚ØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©</p>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                ${getRecommendedTools(dominantStyle).map(tool => 
                                    `<div class="bg-white/90 rounded-xl p-6 text-center backdrop-blur-sm hover:bg-white transition-all duration-300">
                                        <div class="text-3xl mb-3">${tool.icon}</div>
                                        <h5 class="text-black font-semibold mb-2">${tool.name}</h5>
                                        <p class="text-gray-700 text-sm leading-relaxed">${tool.description}</p>
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <button onclick="restartQuiz()" class="btn-gradient text-white font-bold py-4 px-8 rounded-2xl flex items-center">
                            <i class="fas fa-redo ml-2"></i>
                            Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                        </button>
                        <button onclick="shareResults()" class="glass-effect text-white font-semibold py-4 px-8 rounded-2xl hover:scale-105 transition-all duration-300 flex items-center">
                            <i class="fas fa-share-alt ml-2"></i>
                            Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                        </button>
                        <button onclick="downloadResults()" class="glass-effect text-white font-semibold py-4 px-8 rounded-2xl hover:scale-105 transition-all duration-300 flex items-center">
                            <i class="fas fa-download ml-2"></i>
                            ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('navigation').style.display = 'none';
            document.getElementById('results-container').innerHTML = resultHTML;
            document.getElementById('results-container').classList.remove('hidden');
        }

        function restartQuiz() {
            currentQuestion = 0;
            answers = { visual: 0, auditory: 0, kinesthetic: 0 };
            currentStudentName = "";
            
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('navigation').style.display = 'flex';
            document.getElementById('results-container').classList.add('hidden');
            
            showStudentNameModal();
        }

        // Event Listeners
        document.getElementById('next-btn').addEventListener('click', () => {
            saveAnswer();
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                showResults();
            }
        });

        document.getElementById('prev-btn').addEventListener('click', () => {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        });

        // Keyboard shortcuts for teacher login
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && document.getElementById('teacher-login-modal').classList.contains('hidden') === false) {
                checkTeacherPassword();
            }
            if (e.key === 'Enter' && document.getElementById('student-name-modal').classList.contains('hidden') === false) {
                saveStudentName();
            }
        });

        // Study Tips Functions
        function getStudyTechniques(style) {
            const techniques = {
                visual: [
                    {
                        title: "Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø°Ù‡Ù†ÙŠØ©",
                        description: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø±Ù…ÙˆØ² Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨ØµØ±ÙŠØ§Ù‹ ÙˆØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±"
                    },
                    {
                        title: "Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø±Ù…Ø²Ø© Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù†",
                        description: "Ø®ØµØµ Ù„ÙˆÙ† Ù…Ø¹ÙŠÙ† Ù„ÙƒÙ„ Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ù†ÙˆØ¹ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù„ØªÙ†Ø¸ÙŠÙ… Ø£ÙØ¶Ù„"
                    },
                    {
                        title: "Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ø®Ø·Ø·Ø§Øª",
                        description: "Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†ØµÙŠØ© Ø¥Ù„Ù‰ Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ¬Ø¯Ø§ÙˆÙ„ Ù…Ø±Ø¦ÙŠØ©"
                    },
                    {
                        title: "Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ù„Ù…ØµÙˆØ±Ø©",
                        description: "Ø§Ø±Ø¨Ø· ÙƒÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø© Ø¨ØµÙˆØ±Ø© Ø£Ùˆ Ø±Ù…Ø² ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±"
                    }
                ],
                auditory: [
                    {
                        title: "Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù",
                        description: "Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ø¨ØµÙˆØª Ù…Ø³Ù…ÙˆØ¹ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙÙ‡Ù… ÙˆØ§Ù„Ø­ÙØ¸"
                    },
                    {
                        title: "Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©",
                        description: "Ø³Ø¬Ù„ Ø§Ù„Ù…Ù„Ø®ØµØ§Øª ÙˆØ§Ø³ØªÙ…Ø¹ Ø¥Ù„ÙŠÙ‡Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø£Ùˆ Ø§Ù„ØªÙ†Ù‚Ù„"
                    },
                    {
                        title: "Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø§Øª Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©",
                        description: "Ø´Ø§Ø±Ùƒ ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø¯Ø±Ø§Ø³ÙŠØ© ÙˆÙ†Ø§Ù‚Ø´ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ù…Ø¹ Ø§Ù„Ø²Ù…Ù„Ø§Ø¡"
                    },
                    {
                        title: "Ø§Ù„Ø¥ÙŠÙ‚Ø§Ø¹ ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰",
                        description: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ù†Ø§Ø´ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ø¹ Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©"
                    }
                ],
                kinesthetic: [
                    {
                        title: "Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©",
                        description: "Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø­Ø±ÙƒÙŠØ©"
                    },
                    {
                        title: "Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ù„Ù…Ø¬Ø³Ù…Ø§Øª",
                        description: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ù„Ù…ÙˆØ³Ø© ÙˆØ§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯"
                    },
                    {
                        title: "Ø§Ù„Ø­Ø±ÙƒØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©",
                        description: "Ø§Ù…Ø´ Ø£Ùˆ ØªØ­Ø±Ùƒ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ØªØ­ÙÙŠØ² Ø§Ù„ØªØ±ÙƒÙŠØ²"
                    },
                    {
                        title: "Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠ",
                        description: "Ø·Ø¨Ù‚ Ù…Ø§ ØªØªØ¹Ù„Ù…Ù‡ Ø¹Ù…Ù„ÙŠØ§Ù‹ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ¬Ø§Ø±Ø¨ ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø©"
                    }
                ]
            };
            return techniques[style] || [];
        }

        function getEnvironmentTips(style) {
            const tips = {
                visual: [
                    "Ù…ÙƒØ§Ù† Ø¯Ø±Ø§Ø³Ø© Ù…Ù†Ø¸Ù… ÙˆÙ…Ø±ØªØ¨ Ø¨ØµØ±ÙŠØ§Ù‹",
                    "Ø¥Ø¶Ø§Ø¡Ø© Ø¬ÙŠØ¯Ø© ÙˆØ·Ø¨ÙŠØ¹ÙŠØ© Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†",
                    "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙÙŠ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø³Ø§Ø­Ø©",
                    "ØªØ¬Ù†Ø¨ Ø§Ù„ÙÙˆØ¶Ù‰ Ø§Ù„Ø¨ØµØ±ÙŠØ© ÙˆØ§Ù„Ù…Ø´ØªØªØ§Øª",
                    "ÙˆØ¶Ø¹ Ø§Ù„Ù…Ù„ØµÙ‚Ø§Øª ÙˆØ§Ù„Ø®Ø±Ø§Ø¦Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†"
                ],
                auditory: [
                    "Ù…ÙƒØ§Ù† Ù‡Ø§Ø¯Ø¦ Ø¨Ø¹ÙŠØ¯ Ø¹Ù† Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡",
                    "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ´ØºÙŠÙ„ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù‡Ø§Ø¯Ø¦Ø© Ø£Ùˆ Ø£ØµÙˆØ§Øª Ø·Ø¨ÙŠØ¹ÙŠØ©",
                    "Ù…Ø³Ø§Ø­Ø© ØªØ³Ù…Ø­ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù",
                    "ØªØ¬Ù†Ø¨ Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…Ø´ØªØªØ© ÙˆØ§Ù„Ù…Ù‚Ø§Ø·Ø¹Ø§Øª",
                    "ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¬Ù„ ØµÙˆØªÙŠ Ø£Ùˆ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„"
                ],
                kinesthetic: [
                    "Ù…Ø³Ø§Ø­Ø© ØªØ³Ù…Ø­ Ø¨Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„ØªÙ†Ù‚Ù„",
                    "ÙƒØ±Ø³ÙŠ Ù…Ø±ÙŠØ­ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ÙŠØªÙ‡",
                    "Ø·Ø§ÙˆÙ„Ø© ÙˆØ§Ø³Ø¹Ø© Ù„Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©",
                    "ØªÙˆÙØ± Ø£Ø¯ÙˆØ§Øª Ù…Ù„Ù…ÙˆØ³Ø© ÙˆÙ…ÙˆØ§Ø¯ Ù„Ù„ØªØ¬Ø±ÙŠØ¨",
                    "Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø£Ø®Ø° ÙØªØ±Ø§Øª Ø±Ø§Ø­Ø© Ù„Ù„Ø­Ø±ÙƒØ©"
                ]
            };
            return tips[style] || [];
        }

        function getMemoryTechniques(style) {
            const techniques = {
                visual: [
                    {
                        title: "Ù‚ØµØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø©",
                        description: "Ø§Ø±Ø¨Ø· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø£Ù…Ø§ÙƒÙ† Ù…Ø£Ù„ÙˆÙØ© ÙÙŠ Ù…Ù†Ø²Ù„Ùƒ Ø£Ùˆ Ù…Ø¯Ø±Ø³ØªÙƒ"
                    },
                    {
                        title: "Ø§Ù„ØµÙˆØ± Ø§Ù„Ø°Ù‡Ù†ÙŠØ©",
                        description: "Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¬Ø±Ø¯Ø© Ø¥Ù„Ù‰ ØµÙˆØ± Ø­ÙŠØ© ÙÙŠ Ø°Ù‡Ù†Ùƒ"
                    },
                    {
                        title: "Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø¨ØµØ±ÙŠØ©",
                        description: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…ÙˆØ² ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©"
                    }
                ],
                auditory: [
                    {
                        title: "Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„ØµÙˆØªÙŠ",
                        description: "ÙƒØ±Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù Ø¹Ø¯Ø© Ù…Ø±Ø§Øª Ø¨Ø¥ÙŠÙ‚Ø§Ø¹Ø§Øª Ù…Ø®ØªÙ„ÙØ©"
                    },
                    {
                        title: "Ø§Ù„Ù‚ÙˆØ§ÙÙŠ ÙˆØ§Ù„Ø£Ù†Ø§Ø´ÙŠØ¯",
                        description: "Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰ Ù‚ÙˆØ§ÙÙŠ Ø£Ùˆ Ø£ØºØ§Ù†ÙŠ Ø³Ù‡Ù„Ø© Ø§Ù„ØªØ°ÙƒØ±"
                    },
                    {
                        title: "Ø§Ù„Ø´Ø±Ø­ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ†",
                        description: "Ø§Ø´Ø±Ø­ Ù…Ø§ ØªØ¹Ù„Ù…ØªÙ‡ Ù„Ø´Ø®Øµ Ø¢Ø®Ø± Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª"
                    }
                ],
                kinesthetic: [
                    {
                        title: "Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©",
                        description: "Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø¹Ø¯Ø© Ù…Ø±Ø§Øª Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯"
                    },
                    {
                        title: "Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¬Ø³Ø¯ÙŠØ©",
                        description: "Ø§Ø±Ø¨Ø· ÙƒÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø© Ø¨Ø­Ø±ÙƒØ© Ø£Ùˆ Ø¥ÙŠÙ…Ø§Ø¡Ø© Ù…Ø¹ÙŠÙ†Ø©"
                    },
                    {
                        title: "Ø§Ù„ØªÙ…Ø«ÙŠÙ„ ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø©",
                        description: "Ù…Ø«Ù„ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø£Ùˆ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ø¬Ø³Ø¯Ùƒ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø°Ø§ÙƒØ±Ø©"
                    }
                ]
            };
            return techniques[style] || [];
        }

        function getExamStrategies(style) {
            const strategies = {
                visual: [
                    "Ø§Ø±Ø³Ù… Ù…Ø®Ø·Ø·Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ù„ØªÙ†Ø¸ÙŠÙ… Ø£ÙÙƒØ§Ø±Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©",
                    "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙÙŠ ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø©",
                    "Ø§Ù‚Ø±Ø£ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø¹Ù†Ø§ÙŠØ© ÙˆØªØ®ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨ØµØ±ÙŠØ§Ù‹",
                    "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ© ÙÙŠ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù…ÙƒØ§Ù†",
                    "Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙˆØ±Ù‚Ø© Ø¨ØµØ±ÙŠØ§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª"
                ],
                auditory: [
                    "Ø§Ù‚Ø±Ø£ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨ØµÙˆØª Ù…Ù†Ø®ÙØ¶ (Ù‡Ù…Ø³)",
                    "ÙƒØ±Ø± Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø°Ù‡Ù†Ùƒ Ù‚Ø¨Ù„ ÙƒØªØ§Ø¨ØªÙ‡Ø§",
                    "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„ØªÙ†Ø¸ÙŠÙ… Ø£ÙÙƒØ§Ø±Ùƒ",
                    "Ø§Ù‚Ø±Ø£ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨ØµÙˆØª Ù…Ù†Ø®ÙØ¶ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
                    "Ø§Ø³ØªÙ…Ø¹ Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨ Ø¨Ø¹Ù†Ø§ÙŠØ©"
                ],
                kinesthetic: [
                    "ØªØ­Ø±Ùƒ ÙÙŠ Ù…Ù‚Ø¹Ø¯Ùƒ Ø¨Ù‡Ø¯ÙˆØ¡ Ù„ØªØ­ÙÙŠØ² Ø§Ù„ØªØ±ÙƒÙŠØ²",
                    "Ø§Ø³ØªØ®Ø¯Ù… ÙŠØ¯ÙŠÙƒ ÙÙŠ Ø§Ù„Ø¹Ø¯ Ø£Ùˆ Ø§Ù„ØªÙÙƒÙŠØ±",
                    "Ø§ÙƒØªØ¨ Ù†Ù‚Ø§Ø· Ø³Ø±ÙŠØ¹Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©",
                    "Ø®Ø° ÙØªØ±Ø§Øª Ø±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© Ù„ØªÙ…Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ø¶Ù„Ø§Øª",
                    "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚Ù„Ù… ÙƒØ£Ø¯Ø§Ø© ØªÙÙƒÙŠØ± (Ø¯ÙˆÙ† Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ±Ù‚Ø©)"
                ]
            };
            return strategies[style] || [];
        }

        function getRecommendedTools(style) {
            const tools = {
                visual: [
                    {
                        name: "MindMeister",
                        icon: "ğŸ—ºï¸",
                        description: "Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø±Ø§Ø¦Ø· Ø°Ù‡Ù†ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§"
                    },
                    {
                        name: "Canva",
                        icon: "ğŸ¨",
                        description: "Ù„ØªØµÙ…ÙŠÙ… Ù…Ù„ØµÙ‚Ø§Øª ÙˆÙ…ÙˆØ§Ø¯ Ø¨ØµØ±ÙŠØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ©"
                    },
                    {
                        name: "Anki",
                        icon: "ğŸ“š",
                        description: "Ø¨Ø·Ø§Ù‚Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø°ÙƒÙŠØ© Ù…Ø¹ ØµÙˆØ± ÙˆØ±Ø³ÙˆÙ…"
                    }
                ],
                auditory: [
                    {
                        name: "Audacity",
                        icon: "ğŸ™ï¸",
                        description: "Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©"
                    },
                    {
                        name: "Spotify",
                        icon: "ğŸµ",
                        description: "Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„ØªØ±ÙƒÙŠØ² ÙˆØ§Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©"
                    },
                    {
                        name: "Voice Recorder",
                        icon: "ğŸ“±",
                        description: "Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù„Ø®ØµØ§Øª Ø§Ù„ØµÙˆØªÙŠØ©"
                    }
                ],
                kinesthetic: [
                    {
                        name: "GoodNotes",
                        icon: "âœï¸",
                        description: "Ù„Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ§Ù„Ø±Ø³Ù…"
                    },
                    {
                        name: "Forest",
                        icon: "ğŸŒ³",
                        description: "Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ù…Ø¹ ÙØªØ±Ø§Øª Ø±Ø§Ø­Ø© Ù…Ù†ØªØ¸Ù…Ø©"
                    },
                    {
                        name: "Duolingo",
                        icon: "ğŸ¦‰",
                        description: "ØªØ¹Ù„Ù… ØªÙØ§Ø¹Ù„ÙŠ Ù…Ø¹ Ø£Ù†Ø´Ø·Ø© Ø¹Ù…Ù„ÙŠØ©"
                    }
                ]
            };
            return tools[style] || [];
        }

        // Additional Functions
        function shareResults() {
            const dominantStyle = Object.keys(answers).reduce((a, b) => 
                answers[a] > answers[b] ? a : b
            );
            
            const styleNames = {
                visual: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¨ØµØ±ÙŠ",
                auditory: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø³Ù…Ø¹ÙŠ", 
                kinesthetic: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙƒÙŠ"
            };
            
            if (navigator.share) {
                navigator.share({
                    title: 'Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù…',
                    text: `Ø§ÙƒØªØ´ÙØª Ø£Ù† Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠ Ù‡Ùˆ: ${styleNames[dominantStyle]}! Ø¬Ø±Ø¨ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†ÙØ³Ùƒ.`,
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const text = `Ø§ÙƒØªØ´ÙØª Ø£Ù† Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠ Ù‡Ùˆ: ${styleNames[dominantStyle]}! Ø¬Ø±Ø¨ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†ÙØ³Ùƒ: ${window.location.href}`;
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!', 'success');
                });
            }
        }

        function downloadResults() {
            const dominantStyle = Object.keys(answers).reduce((a, b) => 
                answers[a] > answers[b] ? a : b
            );
            
            const total = Object.values(answers).reduce((sum, count) => sum + count, 0);
            const percentages = {
                visual: Math.round((answers.visual / total) * 100),
                auditory: Math.round((answers.auditory / total) * 100),
                kinesthetic: Math.round((answers.kinesthetic / total) * 100)
            };

            const styleNames = {
                visual: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¨ØµØ±ÙŠ",
                auditory: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø³Ù…Ø¹ÙŠ", 
                kinesthetic: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙƒÙŠ"
            };

            const reportContent = `ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø´Ø®ØµÙŠ
=====================================

Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨:
Ø§Ù„Ø§Ø³Ù…: ${currentStudentName}
ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${new Date().toLocaleDateString('ar-SA')}
ÙˆÙ‚Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${new Date().toLocaleTimeString('ar-SA')}

=====================================
Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
=====================================

Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†: ${styleNames[dominantStyle]}

Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù†ØªØ§Ø¦Ø¬:
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¨ØµØ±ÙŠ: ${percentages.visual}% (${answers.visual} Ù…Ù† ${total} Ø¥Ø¬Ø§Ø¨Ø©)
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø³Ù…Ø¹ÙŠ: ${percentages.auditory}% (${answers.auditory} Ù…Ù† ${total} Ø¥Ø¬Ø§Ø¨Ø©)  
â€¢ Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙƒÙŠ: ${percentages.kinesthetic}% (${answers.kinesthetic} Ù…Ù† ${total} Ø¥Ø¬Ø§Ø¨Ø©)

=====================================
Ø®ØµØ§Ø¦Øµ Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:
=====================================

${getStudyTechniques(dominantStyle).map((tech, i) => `${i+1}. ${tech.title}
   ${tech.description}`).join('\n\n')}

=====================================
Ù†ØµØ§Ø¦Ø­ Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©:
=====================================

${getEnvironmentTips(dominantStyle).map((tip, i) => `${i+1}. ${tip}`).join('\n')}

=====================================
ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ°ÙƒØ± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ:
=====================================

${getMemoryTechniques(dominantStyle).map((tech, i) => `${i+1}. ${tech.title}
   ${tech.description}`).join('\n\n')}

=====================================
Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù†Ø¬Ø§Ø­ ÙÙŠ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª:
=====================================

${getExamStrategies(dominantStyle).map((strategy, i) => `${i+1}. ${strategy}`).join('\n')}

=====================================
Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…ÙÙŠØ¯Ø©:
=====================================

${getRecommendedTools(dominantStyle).map((tool, i) => `${i+1}. ${tool.name}
   ${tool.description}`).join('\n\n')}

=====================================
Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:
=====================================

â€¢ Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† ${questions.length} Ø³Ø¤Ø§Ù„
â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
â€¢ ØªØ°ÙƒØ± Ø£Ù† Ù…Ø¹Ø¸Ù… Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙŠØ¬Ù…Ø¹ÙˆÙ† Ø¨ÙŠÙ† Ø£ÙƒØ«Ø± Ù…Ù† Ù†Ù…Ø· ØªØ¹Ù„Ù… ÙˆØ§Ø­Ø¯
â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙƒØ¯Ù„ÙŠÙ„ Ù„ØªØ­Ø³ÙŠÙ† Ø·Ø±ÙŠÙ‚Ø© ØªØ¹Ù„Ù…Ùƒ

=====================================
ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©:
Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${new Date().toLocaleDateString('ar-SA')} - ${new Date().toLocaleTimeString('ar-SA')}
=====================================
`;

            // Create and download the file with better formatting
            const blob = new Blob(['\ufeff' + reportContent], { 
                type: 'text/plain;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ØªÙ‚Ø±ÙŠØ±-Ù†Ù…Ø·-Ø§Ù„ØªØ¹Ù„Ù…-${currentStudentName.replace(/\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.txt`;
            
            // Ensure the download actually happens
            document.body.appendChild(a);
            a.style.display = 'none';
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“„', 'success');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-semibold transform translate-x-full transition-transform duration-300 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(full)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Quick Results Functions
        function showQuickResults() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            
            // Update quick stats
            document.getElementById('quick-total').textContent = results.length;
            
            const styleCounts = {
                visual: results.filter(r => r.dominantStyle === 'visual').length,
                auditory: results.filter(r => r.dominantStyle === 'auditory').length,
                kinesthetic: results.filter(r => r.dominantStyle === 'kinesthetic').length
            };
            
            document.getElementById('quick-visual').textContent = styleCounts.visual;
            document.getElementById('quick-auditory').textContent = styleCounts.auditory;
            document.getElementById('quick-kinesthetic').textContent = styleCounts.kinesthetic;
            
            // Show recent results (last 5)
            const recentResults = results.slice(-5).reverse();
            const recentContainer = document.getElementById('recent-results');
            
            if (recentResults.length === 0) {
                recentContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-inbox text-3xl mb-2"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                `;
            } else {
                recentContainer.innerHTML = recentResults.map(result => {
                    const styleInfo = {
                        visual: { name: "Ø¨ØµØ±ÙŠ", color: "green", icon: "fas fa-eye" },
                        auditory: { name: "Ø³Ù…Ø¹ÙŠ", color: "purple", icon: "fas fa-ear-listen" },
                        kinesthetic: { name: "Ø­Ø±ÙƒÙŠ", color: "orange", icon: "fas fa-hand-paper" }
                    };
                    
                    const style = styleInfo[result.dominantStyle];
                    const date = new Date(result.timestamp).toLocaleDateString('ar-SA');
                    const time = new Date(result.timestamp).toLocaleTimeString('ar-SA', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                    
                    return `
                        <div class="bg-white/80 rounded-xl p-4 flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-${style.color}-100 flex items-center justify-center ml-3">
                                    <i class="${style.icon} text-${style.color}-600"></i>
                                </div>
                                <div>
                                    <div class="font-semibold text-black">${result.name}</div>
                                    <div class="text-sm text-gray-600">Ù…ØªØ¹Ù„Ù… ${style.name}</div>
                                </div>
                            </div>
                            <div class="text-left text-sm text-gray-500">
                                <div>${date}</div>
                                <div>${time}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('quick-results-modal').classList.remove('hidden');
        }

        function hideQuickResults() {
            document.getElementById('quick-results-modal').classList.add('hidden');
        }

        function exportQuickCSV() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            if (results.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
                return;
            }
            
            const headers = ['Ø§Ù„Ø§Ø³Ù…', 'Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†', 'Ø¨ØµØ±ÙŠ %', 'Ø³Ù…Ø¹ÙŠ %', 'Ø­Ø±ÙƒÙŠ %', 'Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ø§Ù„ÙˆÙ‚Øª', 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª'];
            const csvContent = [
                headers.join(','),
                ...results.map(result => [
                    `"${result.name}"`,
                    result.dominantStyle === 'visual' ? 'Ø¨ØµØ±ÙŠ' : result.dominantStyle === 'auditory' ? 'Ø³Ù…Ø¹ÙŠ' : 'Ø­Ø±ÙƒÙŠ',
                    result.percentages.visual + '%',
                    result.percentages.auditory + '%',
                    result.percentages.kinesthetic + '%',
                    new Date(result.timestamp).toLocaleDateString('ar-SA'),
                    new Date(result.timestamp).toLocaleTimeString('ar-SA'),
                    (result.answers.visual + result.answers.auditory + result.answers.kinesthetic)
                ].join(','))
            ].join('\n');
            
            const blob = new Blob(['\ufeff' + csvContent], { 
                type: 'text/csv;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Ù†ØªØ§Ø¦Ø¬-Ø³Ø±ÙŠØ¹Ø©-${new Date().toISOString().split('T')[0]}.csv`;
            
            // Ensure download happens
            document.body.appendChild(a);
            a.style.display = 'none';
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“Š', 'success');
            hideQuickResults();
        }

        function exportQuickExcel() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            if (results.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
                return;
            }
            
            // Create workbook
            const wb = XLSX.utils.book_new();
            
            // Main results sheet
            const mainData = [
                ['Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨', 'Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†', 'Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ØµØ±ÙŠØ© %', 'Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø³Ù…Ø¹ÙŠØ© %', 'Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø±ÙƒÙŠØ© %', 'Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ø§Ù„ÙˆÙ‚Øª'],
                ...results.map(result => [
                    result.name,
                    result.dominantStyle === 'visual' ? 'Ø¨ØµØ±ÙŠ' : result.dominantStyle === 'auditory' ? 'Ø³Ù…Ø¹ÙŠ' : 'Ø­Ø±ÙƒÙŠ',
                    result.percentages.visual,
                    result.percentages.auditory,
                    result.percentages.kinesthetic,
                    new Date(result.timestamp).toLocaleDateString('ar-SA'),
                    new Date(result.timestamp).toLocaleTimeString('ar-SA')
                ])
            ];
            
            const mainWs = XLSX.utils.aoa_to_sheet(mainData);
            mainWs['!cols'] = [
                { wch: 20 }, // Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
                { wch: 15 }, // Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†
                { wch: 15 }, // Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ØµØ±ÙŠØ©
                { wch: 15 }, // Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø³Ù…Ø¹ÙŠØ©
                { wch: 15 }, // Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø±ÙƒÙŠØ©
                { wch: 12 }, // Ø§Ù„ØªØ§Ø±ÙŠØ®
                { wch: 10 }  // Ø§Ù„ÙˆÙ‚Øª
            ];
            
            XLSX.utils.book_append_sheet(wb, mainWs, 'Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø±ÙŠØ¹Ø©');
            
            // Write file
            const fileName = `Ù†ØªØ§Ø¦Ø¬-Ø³Ø±ÙŠØ¹Ø©-${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
            
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù Excel Ø¨Ù†Ø¬Ø§Ø­! ğŸ“Š', 'success');
            hideQuickResults();
        }

        function downloadExcelResults() {
            const dominantStyle = Object.keys(answers).reduce((a, b) => 
                answers[a] > answers[b] ? a : b
            );
            
            const total = Object.values(answers).reduce((sum, count) => sum + count, 0);
            const percentages = {
                visual: Math.round((answers.visual / total) * 100),
                auditory: Math.round((answers.auditory / total) * 100),
                kinesthetic: Math.round((answers.kinesthetic / total) * 100)
            };

            const styleNames = {
                visual: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¨ØµØ±ÙŠ",
                auditory: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø³Ù…Ø¹ÙŠ", 
                kinesthetic: "Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙƒÙŠ"
            };

            // Create workbook
            const wb = XLSX.utils.book_new();
            
            // Personal results sheet
            const personalData = [
                ['ØªÙ‚Ø±ÙŠØ± Ù†Ù…Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø´Ø®ØµÙŠ', ''],
                ['', ''],
                ['Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨', ''],
                ['Ø§Ù„Ø§Ø³Ù…', currentStudentName],
                ['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', new Date().toLocaleDateString('ar-SA')],
                ['ÙˆÙ‚Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', new Date().toLocaleTimeString('ar-SA')],
                ['', ''],
                ['Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', ''],
                ['Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†', styleNames[dominantStyle]],
                ['', ''],
                ['Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ', ''],
                ['Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø¨ØµØ±ÙŠ', percentages.visual + '%'],
                ['Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø³Ù…Ø¹ÙŠ', percentages.auditory + '%'],
                ['Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø­Ø±ÙƒÙŠ', percentages.kinesthetic + '%'],
                ['', ''],
                ['Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª', ''],
                ['Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨ØµØ±ÙŠØ©', answers.visual],
                ['Ø¥Ø¬Ø§Ø¨Ø§Øª Ø³Ù…Ø¹ÙŠØ©', answers.auditory],
                ['Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø±ÙƒÙŠØ©', answers.kinesthetic],
                ['Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª', total]
            ];
            
            const personalWs = XLSX.utils.aoa_to_sheet(personalData);
            personalWs['!cols'] = [{ wch: 25 }, { wch: 20 }];
            
            XLSX.utils.book_append_sheet(wb, personalWs, 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©');
            
            // Study tips sheet
            const studyTips = getStudyTechniques(dominantStyle);
            const tipsData = [
                ['ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ', ''],
                ['', ''],
                ...studyTips.map((tip, index) => [
                    `${index + 1}. ${tip.title}`,
                    tip.description
                ])
            ];
            
            const tipsWs = XLSX.utils.aoa_to_sheet(tipsData);
            tipsWs['!cols'] = [{ wch: 30 }, { wch: 50 }];
            
            XLSX.utils.book_append_sheet(wb, tipsWs, 'Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©');
            
            // Memory techniques sheet
            const memoryTechs = getMemoryTechniques(dominantStyle);
            const memoryData = [
                ['ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ°ÙƒØ±', ''],
                ['', ''],
                ...memoryTechs.map((tech, index) => [
                    `${index + 1}. ${tech.title}`,
                    tech.description
                ])
            ];
            
            const memoryWs = XLSX.utils.aoa_to_sheet(memoryData);
            memoryWs['!cols'] = [{ wch: 30 }, { wch: 50 }];
            
            XLSX.utils.book_append_sheet(wb, memoryWs, 'ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­ÙØ¸');
            
            // Environment tips sheet
            const envTips = getEnvironmentTips(dominantStyle);
            const envData = [
                ['Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©', ''],
                ['', ''],
                ...envTips.map((tip, index) => [
                    `${index + 1}.`,
                    tip
                ])
            ];
            
            const envWs = XLSX.utils.aoa_to_sheet(envData);
            envWs['!cols'] = [{ wch: 5 }, { wch: 50 }];
            
            XLSX.utils.book_append_sheet(wb, envWs, 'Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø©');
            
            // Write file
            const fileName = `ØªÙ‚Ø±ÙŠØ±-Ù†Ù…Ø·-Ø§Ù„ØªØ¹Ù„Ù…-${currentStudentName.replace(/\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
            
            showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Excel Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“Š', 'success');
        }

        function updateParticipantsCount() {
            const results = JSON.parse(localStorage.getItem('studentResults') || '[]');
            document.getElementById('total-participants').textContent = results.length;
        }

        // Initialize
        updateParticipantsCount();
        showStudentNameModal();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97556b2450302917',t:'MTc1NjIzMzIxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
